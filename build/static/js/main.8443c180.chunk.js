(this["webpackJsonpvote-app"]=this["webpackJsonpvote-app"]||[]).push([[0],{1822:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(184),r=n(1894),c=n(13),s=n.n(c),l=(n(210),n(24)),u=n.n(l),d=n(35),j=n(7),b=(n(212),n(1899)),m=n(1826),h=n(1868),p=n(12),g=(n(213),n(4),n(1870)),f=n(1895),O=n(1825),x=n(1873),v=n(1900),y=n(1874),k=n(1875),w=n(1876),C=n(1877),S=n(185),N=n(1880),P=n(1881),D=n(1883),A=n(1879),G=n(1897),B=n(1882),z=n(1872),R=n(70),V=n(2),L={maintainAspectRatio:!1,responsive:!1,indexAxis:"y",scales:{x:{display:!1,grid:{display:!1},ticks:{stepSize:1}},y:{grid:{display:!1},ticks:{autoSkip:!1,stepSize:2}}},elements:{bar:{borderWidth:2,borderRadius:100}},plugins:{legend:{display:!1,position:"right"},title:{display:!1,text:"Chart.js Horizontal Bar Chart"}}},I=function(e){e.getElementAtEvent;var t=e.data;return Object(V.jsx)(R.a,{data:t,options:L,style:{width:"80%",marginLeft:"auto",marginRight:"auto",overflow:"hidden"}})},U=(n(162),n(320),n(96)),T=n.n(U),H=n(171),_=n.n(H),X=n(19),W=o.a.createContext();function Z(){return Object(a.useContext)(W)}function Q(e){var t=e.children,n=Object(a.useState)(!1),o=Object(j.a)(n,2),i=o[0],r=o[1],c=Object(a.useState)(""),s=Object(j.a)(c,2),l=s[0],u=s[1];return Object(V.jsx)(W.Provider,{value:{signInOpen:i,setSignInOpen:r,signInMsg:l,setSignInMsg:u},children:t})}var M=n(14),q=o.a.createContext(),F="https://gif-vote.herokuapp.com";function K(){return Object(a.useContext)(q)}function E(e){var t=e.children,n=Object(a.useState)(!1),o=Object(j.a)(n,2),i=(o[0],o[1],Object(a.useState)("")),r=Object(j.a)(i,2),c=(r[0],r[1],Object(a.useState)([])),s=Object(j.a)(c,2),l=s[0],b=s[1],m=Object(a.useRef)(10),h=Object(a.useState)(!0),p=Object(j.a)(h,2),g=p[0],f=p[1],O=Object(a.useState)(0),x=Object(j.a)(O,2),v=x[0],y=x[1],k=Object(a.useState)("507"),w=Object(j.a)(k,2),C=w[0],S=w[1],N=Object(X.b)(),P=(N.isAuthenticated,N.user,N.logout),D=(N.isLoading,Object(a.useState)("vote")),A=Object(j.a)(D,2),G=A[0],B=A[1];Object(a.useEffect)((function(){R()}),[v,G]);var z=function(){return new Promise((function(e,t){console.log("getting data",l.length,m.current),l.length>m.current||!g||(console.log("calling API",m.current),fetch("".concat(F,"/api-vote/?user_id=").concat(C,"&result=").concat(m.current,"&isPersonal=").concat(v,"&sortBy=").concat(G)).then((function(e){return e.json()})).then((function(t){console.log("success",t);for(var n={},a=0;a<t.length;a++){var o=t[a],i=o.poll_id,r=o.poll_text,c=o.gifurl,s=o.gifheight,u=o.gifwidth,d=o.option_id,j=o.option_name,m=o.votecount,h=o.totalvotecount,p=o.created_by,g=o.user_avatar,O=o.created_at,x=o.isvoted_bool,v=o.isvoted_option_id,y=o.comment_count,k=o.num_likes,w=o.user_liked;i in n||(n[i]={poll_text:r,poll_id:i,gifURL:c,gifHeight:s,gifWidth:u,totalVoteCount:h,created_by:p,user_avatar:g,created_at:O,options:[],isVoted_bool:x,isVoted_option_id:v,comment_count:y,num_likes:k,user_liked:w,chartData:{labels:[],datasets:[{barThickness:10,maxBarThickness:10,label:"# of Votes",data:[],backgroundColor:[]}]},voteData:[]}),n[i].options.push({option_id:d,option_name:j,voteCount:m}),n[i].voteData.push({option_id:d,text:j,votes:Number(m),backgroundColor:v==d?"rgba(34, 191, 160, 1)":"rgba(10, 10, 10, 0.5)"})}for(var C=Object.keys(n),S=function(e){var t=C[e];n[t].voteData.sort((function(e,t){return t.votes-e.votes})),n[t].voteData.map((function(e){var a=e.text,o=e.votes,i=e.backgroundColor;n[t].chartData.labels.push(a),n[t].chartData.datasets[0].data.push(o),n[t].chartData.datasets[0].backgroundColor.push(i)}))},N=0;N<C.length;N++)S(N);var P=Object.values(n);switch(console.log("sortBy",G),G){case"vote":P.sort((function(e,t){return t.totalVoteCount-e.totalVoteCount}));break;case"time":P.sort((function(e,t){return t.poll_id-e.poll_id}));break;case"like":P.sort((function(e,t){return t.num_likes-e.num_likes}))}b([].concat(Object(M.a)(l),Object(M.a)(P))),0==P.length&&f(!1),console.log("new data",P),e(l)})).catch(t))}))},R=function(){m.current=10,f(!0),b([])},L=function(e){return new Promise((function(t,n){console.log("calling Update API"),console.log("before before",JSON.parse(JSON.stringify(l))),fetch("".concat(F,"/api-vote-update/?user_id=").concat(C,"&poll_id=").concat(e,"&isPersonal=").concat(v)).then((function(e){return e.json()})).then((function(n){console.log("success",n);for(var a={},o=0;o<n.length;o++){var i=n[o],r=i.poll_id,c=i.poll_text,s=i.gifurl,u=i.gifheight,d=i.gifwidth,j=i.option_id,m=i.option_name,h=i.votecount,p=i.totalvotecount,g=i.created_by,f=i.user_avatar,O=i.created_at,x=i.isvoted_bool,v=i.isvoted_option_id,y=i.comment_count,k=i.num_likes,w=i.user_liked;r in a||(a[r]={poll_text:c,poll_id:r,gifURL:s,gifHeight:u,gifWidth:d,totalVoteCount:p,created_by:g,user_avatar:f,created_at:O,options:[],isVoted_bool:x,isVoted_option_id:v,comment_count:y,num_likes:k,user_liked:w,chartData:{labels:[],datasets:[{barThickness:10,maxBarThickness:10,label:"# of Votes",data:[],backgroundColor:[]}]},voteData:[]}),a[r].options.push({option_id:j,option_name:m,voteCount:h}),a[r].voteData.push({option_id:j,text:m,votes:Number(h),backgroundColor:v==j?"rgba(34, 191, 160, 1)":"rgba(10, 10, 10, 0.5)"})}for(var C=Object.keys(a),S=function(e){var t=C[e];a[t].voteData.sort((function(e,t){return t.votes-e.votes})),a[t].voteData.map((function(e){var n=e.text,o=e.votes,i=e.backgroundColor;a[t].chartData.labels.push(n),a[t].chartData.datasets[0].data.push(o),a[t].chartData.datasets[0].backgroundColor.push(i)}))},N=0;N<C.length;N++)S(N);var P=JSON.parse(JSON.stringify(l));console.log("before",JSON.parse(JSON.stringify(l)));for(var D=0;D<P.length;D++)if(P[D].poll_id==e){P[D]=JSON.parse(JSON.stringify(a[e]));break}console.log(P),b(JSON.parse(JSON.stringify(P))),t(P)})).catch(n)}))};return Object(V.jsx)(q.Provider,{value:{data:l,getUserData:function(e){return new Promise((function(t,n){fetch("".concat(F,"/api-get-user/?user_email=").concat(e.email,"&user_name=").concat(e.nickname,"&user_avatar=").concat(e.picture),{method:"POST"}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log("userId = ",e),e&&e[0]&&e[0].id?S(String(e[0].id)):P(),t(e)})).catch(n)}))},getDataset:z,updateDataset:L,refreshDataset:R,handleFetchMoreData:function(){console.log("fetching more data ",m,l.length),l.length<m.current?console.log("cancel fetch more data"):(m.current+=10,z())},handleFetchMoreDataPromise:function(){return new Promise((function(e,t){console.log("fetching more data ",m,l.length),l.length<m.current&&(console.log("cancel fetch more data"),t("cancel fetch more data")),m.current+=10,z().then((function(){return e("OK")})).catch(t)}))},isPersonal:v,setIsPersonal:y,hasMore:g,userId:C,setSortBy:B,submitVote:function(e){var t=e.user_id,n=e.poll_id,a=e.option_id;return new Promise((function(e,o){fetch("".concat(F,"/api-update/?user_id=").concat(t,"&poll_id=").concat(n,"&option_id=").concat(a),{method:"POST"}).then((function(e){console.log(e),e.json()})).then((function(t){console.log("update",t),L(n),e("OK")})).catch(o)}))},getComments:function(e){return new Promise((function(t,n){fetch("".concat(F,"/api-comments/?poll_id=").concat(e)).then((function(e){return e.json()})).then((function(e){console.log("comments",e),t(e)})).catch(n)}))},submitComment:function(e){var t=e.user_id,n=e.poll_id,a=e.comment;return new Promise((function(e,o){fetch("".concat(F,"/api-insert-comments/?poll_id=").concat(n,"&user_id=").concat(t,"&comment_text=").concat(a),{method:"POST"}).then((function(e){return e.json()})).then(function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("comment inserted",a),L(n),e("OK");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(o)}))},submitLike:function(e){var t=e.poll_id,n=e.user_id;return new Promise((function(e,a){fetch("".concat(F,"/api-insert-like/?poll_id=").concat(t,"&user_id=").concat(n),{method:"POST"}).then((function(e){return e.json()})).then((function(a){console.log("like inserted",a,t,n),L(t),e("OK")})).catch(a)}))},submitPoll:function(e){var t=e.user_id,n=e.question,a=e.options;return new Promise((function(e,o){fetch("".concat(F,"/api-new-poll/?user_id=").concat(t,"&question=").concat(n,"&options=").concat(a),{method:"POST"}).then((function(e){return console.log("hello1",e),e.json()})).then((function(t){console.log("hello2",t),e("OK")})).catch(o)}))}},children:t})}var Y=n(97),J=n.n(Y),$=n(172),ee=n.n($),te=n(170),ne=n.n(te),ae=n(169),oe=n.n(ae),ie=n(167),re=n.n(ie),ce=n(168),se=n.n(ce),le=n(76),ue=n.n(le),de=Object(h.a)((function(e){var t,n;return{root:{width:"50vw",minWidth:"300px",maxWidth:"600px",marginBottom:"auto"},avatar:{margin:e.spacing(1)},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14,opacity:1},"@keyframes fade":{"0%, 100%":{opacity:0},"50%":{opacity:1}},pos:{marginBottom:12},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},button:{margin:e.spacing(1),textTransform:"none",marginTop:"auto",marginBottom:"auto"},buttonGroup:{display:"block"},buttonGroupContainer:(t={margin:e.spacing(1)},Object(p.a)(t,e.breakpoints.down("md"),{height:"100px"}),Object(p.a)(t,e.breakpoints.up("md"),{height:"200px"}),Object(p.a)(t,"overflow","scroll"),Object(p.a)(t,"display","flex"),Object(p.a)(t,"justifyContent","center"),Object(p.a)(t,"alignItems","center"),t),barChart:(n={},Object(p.a)(n,e.breakpoints.down("md"),{height:"100px"}),Object(p.a)(n,e.breakpoints.up("md"),{height:"200px"}),Object(p.a)(n,"width","90%"),Object(p.a)(n,"overflowY","scroll"),Object(p.a)(n,"overflowX","hidden"),Object(p.a)(n,"padding","unset"),Object(p.a)(n,"paddingLeft",e.spacing(2)),Object(p.a)(n,"paddingRight",e.spacing(2)),n),subtitle:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",verticalAlign:"middle"},comment:{marginLeft:"auto",textTransform:"none"},commentBox:{display:"flex",marginTop:e.spacing(2)},like:{marginRight:"auto",marginLeft:"auto",textTransform:"none"},list:{maxHeight:"50vh",overflow:"scroll",backgroundColor:"#f5f5f5"},moreButton:{marginLeft:"auto",padding:e.spacing(.5)},titleBox:{display:"flex",alignItems:"flex-start"},vote:{marginRight:"auto",textTransform:"none"}}})),je=function(e,t){return e.title===t.title&&e.created_by===t.created_by&&e.created_at===t.created_at&&e.user_id===t.user_id&&JSON.stringify(e.data)==JSON.stringify(t.data)&&e.poll_id===t.poll_id&&e.isVoted_bool===t.isVoted_bool&&JSON.stringify(e.chartData)==JSON.stringify(t.chartData)&&e.comment_count==t.comment_count&&e.gifURL==t.gifURL&&e.num_likes==t.num_likes&&e.user_liked==t.user_liked},be=o.a.memo((function(e){var t=e.gifURL,n=e.gifHeight,o=e.gifWidth,i=(e.addCount,e.title),r=e.created_by,c=e.user_avatar,s=e.created_at,l=e.user_id,u=(e.winner,e.data),d=e.poll_id,b=e.isVoted_bool,m=(e.isVoted_option_id,e.chartData),h=e.totalVoteCount,p=e.comment_count,w=e.num_likes,C=e.user_liked,S=de(),N=(Object(a.useRef)(null),Object(a.useState)(!1)),P=Object(j.a)(N,2);P[0],P[1];return Object(V.jsxs)(g.a,{className:S.root,variant:"outlined",children:[Object(V.jsx)(z.a,{children:Object(V.jsxs)(f.a,{className:S.titleBox,children:[Object(V.jsxs)(O.a,{children:[Object(V.jsx)(x.a,{children:Object(V.jsx)(v.a,{alt:"Guest",className:S.avatar,src:c,children:Object(V.jsx)(ue.a,{})})}),Object(V.jsx)(y.a,{primary:i,secondary:r+" "+ye(s)+" ago"})]}),Object(V.jsx)(ge,{})]})}),Object(V.jsx)(me,{gifURL:t,gifHeight:n,gifWidth:o}),Object(V.jsx)(he,{user_id:l,poll_id:d,data:u,isVoted_bool:b,chartData:m}),Object(V.jsx)(k.a,{}),Object(V.jsx)(fe,{poll_id:d,user_id:l,totalVoteCount:h,user_liked:C,num_likes:w,comment_count:p})]})}),je),me=o.a.memo((function(e){var t=e.gifURL;e.gifHeight,e.gifWidth;return Object(V.jsx)("video",{width:"90%",height:"auto",loop:!0,muted:!0,autoPlay:!0,playsInline:!0,children:Object(V.jsx)("source",{src:t})})}),(function(e,t){return e.gifURL==t.gifURL})),he=o.a.memo((function(e){var t=e.data,n=e.isVoted_bool,a=e.chartData,o=e.user_id,i=e.poll_id,r=de();return Object(V.jsxs)(V.Fragment,{children:[1==n&&Object(V.jsx)(z.a,{className:r.barChart,children:Object(V.jsx)(I,{data:a})}),0==n&&Object(V.jsx)(f.a,{className:r.buttonGroupContainer,children:Object(V.jsx)(f.a,{className:r.buttonGroup,children:t.map((function(e){return Object(V.jsx)(pe,{text:e.text,option_id:e.option_id,user_id:o,poll_id:i},e.option_id)}))})})]})}),(function(e,t){return e.user_id==t.user_id&&e.poll_id==t.poll_id&&JSON.stringify(e.data)==JSON.stringify(t.data)&&e.isVoted_bool==t.isVoted_bool&&JSON.stringify(e.chartData)==JSON.stringify(t.chartData)})),pe=o.a.memo((function(e){var t=e.text,n=e.option_id,a=(e.user_id,e.poll_id),o=de(),i=K(),r=i.submitVote,c=i.userId,s=Object(X.b)().isAuthenticated,l=Z(),j=l.setSignInOpen,b=l.setSignInMsg,m=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=4;break}return b("Sign in to vote"),j(!0),e.abrupt("return");case 4:return e.next=6,r({user_id:c,poll_id:a,option_id:n});case 6:o=e.sent,console.log("voted",n,o);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(V.jsx)(w.a,{variant:"outlined",color:"primary",className:o.button,onClick:function(e){return m(e,n)},children:t})}),(function(e,t){return e.text==t.text&&e.option_id==t.option_id&&e.user_id==t.user_id&&e.poll_id==t.poll_id})),ge=function(){var e=de(),t=Object(a.useState)(null),n=Object(j.a)(t,2),o=n[0],i=n[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(C.a,{className:e.moreButton,onClick:function(e){i(e.currentTarget)},children:Object(V.jsx)(re.a,{})}),Object(V.jsxs)(S.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){i(null)},children:[!1,Object(V.jsx)(N.a,{children:Object(V.jsxs)(w.a,{href:"mailto:gifvote0@gmail.com",style:{textTransform:"none"},children:[Object(V.jsx)(P.a,{children:Object(V.jsx)(se.a,{})}),Object(V.jsx)(y.a,{children:"Report"})]})})]})]})},fe=o.a.memo((function(e){var t=e.poll_id,n=e.user_id,o=e.totalVoteCount,i=e.user_liked,r=e.num_likes,c=e.comment_count,s=de(),l=Object(a.useState)(!1),b=Object(j.a)(l,2),m=b[0],h=b[1],p=Object(a.useState)([]),g=Object(j.a)(p,2),O=g[0],x=g[1],y=Object(X.b)(),C=y.isAuthenticated,S=y.user,N=Z(),P=N.setSignInOpen,A=N.setSignInMsg,G=K(),R=G.getComments,L=G.submitComment,I=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("comment clicked"),0!=m){e.next=6;break}return e.next=4,R(t);case 4:(n=e.sent)&&x(n);case 6:h(!m);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(u.a.mark((function e(a){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=4;break}return A("Sign in to comment"),P(!0),e.abrupt("return");case 4:return e.next=6,L({poll_id:t,user_id:n,comment:a});case 6:if("OK"!=e.sent){e.next=12;break}return e.next=10,R(t);case 10:(o=e.sent)&&x(o);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(B.a,{disableSpacing:!0,children:[Object(V.jsxs)(w.a,{className:s.vote,startIcon:Object(V.jsx)(T.a,{}),children:[o," ",1==o?" Vote":"Votes"]}),Object(V.jsx)(ve,{user_liked:i,num_likes:r,poll_id:t,user_id:n}),Object(V.jsxs)(w.a,{className:s.comment,onClick:I,startIcon:1==m?Object(V.jsx)(oe.a,{color:"primary"}):Object(V.jsx)(ne.a,{}),children:[c," ",1==c?" Comment":"Comments"]})]}),Object(V.jsx)(D.a,{open:m,onClose:function(){return h(!1)},children:Object(V.jsxs)(z.a,{children:[Object(V.jsx)(Oe,{comments:O}),Object(V.jsx)(k.a,{}),Object(V.jsxs)(f.a,{className:s.commentBox,children:[C&&Object(V.jsx)(v.a,{src:S.picture,alt:S.name,className:s.avatar}),!C&&Object(V.jsx)(v.a,{alt:"Guest",className:s.avatar,children:Object(V.jsx)(ue.a,{})}),Object(V.jsx)(xe,{handleSubmitComment:U})]})]})})]})}),(function(e,t){return e.poll_id==t.poll_id&&e.user_id==t.user_id&&e.totalVoteCount==t.totalVoteCount&&e.user_liked==t.user_liked&&e.num_likes==t.num_likes&&e.comment_count==t.comment_count})),Oe=o.a.memo((function(e){var t=e.comments,n=de();return Object(V.jsx)(A.a,{className:n.list,dense:!0,children:t.map((function(e,t){var n=e.user_name,a=e.created_at,o=e.user_avatar,i=e.comment_text;return Object(V.jsxs)(O.a,{children:[Object(V.jsx)(x.a,{children:Object(V.jsx)(v.a,{src:o})}),Object(V.jsx)(y.a,{secondary:n+" "+ye(a)+" ago",primary:i})]},t)}))})}),(function(e,t){return JSON.stringify(e.comments)==JSON.stringify(t.comments)})),xe=function(e){var t=e.handleSubmitComment,n=Object(a.useState)(""),o=Object(j.a)(n,2),i=o[0],r=o[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(G.a,{label:"Add a comment...",variant:"outlined",value:i,onChange:function(e){e.preventDefault(),r(e.target.value)},fullWidth:!0}),Object(V.jsx)(C.a,{color:"primary",onClick:function(){t(i)},children:Object(V.jsx)(_.a,{})})]})},ve=o.a.memo((function(e){var t=e.user_liked,n=e.num_likes,a=e.poll_id,o=(e.user_id,de()),i=K(),r=i.submitLike,c=i.userId,s=Object(X.b)().isAuthenticated,l=Z(),j=l.setSignInOpen,b=l.setSignInMsg,m=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=4;break}return b("Sign in to like"),j(!0),e.abrupt("return");case 4:return e.next=6,r({poll_id:a,user_id:c});case 6:t=e.sent,console.log("submit like",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsxs)(w.a,{className:o.like,onClick:m,startIcon:1==t?Object(V.jsx)(ee.a,{color:"secondary"}):Object(V.jsx)(J.a,{}),children:[n," ",1==n?" Like":"Likes"]})}),(function(e,t){return console.log("likeompare",e.user_liked==t.user_liked,e.num_likes==t.num_likes,e.poll_id==t.poll_id,e.user_id==t.user_id),e.user_liked==t.user_liked&&e.num_likes==t.num_likes&&e.poll_id==t.poll_id&&e.user_id==t.user_id})),ye=function(e){var t=new Date(e),n=new Date,a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()),o=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()),i=Math.floor((o-a)/1e3),r=Math.floor((o-a)/864e5);return i<60?Math.round(i)+"s":i<3600?Math.round(i/60)+"m":i<86400?Math.round(i/3600)+"h":r<7?Math.round(r)+"d":r<365?Math.round(r/7)+"w":Math.round(r/365)+"y"},ke=n(1889),we=n(1888),Ce=n(1887),Se=n(174),Ne=n.n(Se),Pe=n(175),De=n.n(Pe),Ae=n(176),Ge=n.n(Ae),Be=n(18),ze=Object(h.a)((function(e){return{root:{},button:{transform:"scale(2)"},optionContainer:{display:"flex",justifyContent:"center"},addOptionButton:{textTransform:"none",margin:e.spacing(1)},formButton:{textTransform:"none"}}}));function Re(){var e=ze(),t=Object(a.useState)(!1),n=Object(j.a)(t,2),o=n[0],i=n[1],r=Object(a.useState)([{val:"",err:""},{val:"",err:""}]),c=Object(j.a)(r,2),s=c[0],l=c[1],b=Object(a.useState)({val:"",err:""}),m=Object(j.a)(b,2),h=m[0],p=m[1],g=Object(X.b)(),O=(g.loginWithRedirect,g.isAuthenticated),x=Z(),v=x.setSignInOpen,y=x.setSignInMsg,k=K(),S=k.refreshDataset,N=k.submitPoll,P=k.userId,A=Object(Be.f)(),B=function(){l([{val:"",err:""},{val:"",err:""}]),p({val:"",err:""}),i(!1)},z=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=h.val.trim()){e.next=3;break}return p({val:h.val,err:"Cannot be blank"}),e.abrupt("return");case 3:t=0;case 4:if(!(t<s.length)){e.next=13;break}if(""!=s[t].val.trim()){e.next=10;break}return(n=Object(M.a)(s))[t].err="Cannot be blank",l(n),e.abrupt("return");case 10:t++,e.next=4;break;case 13:for(a=Object(M.a)(s),o=0;o<a.length;o++)a[o]=a[o].val.trim();return e.next=17,N({user_id:P,question:h.val.trim(),options:JSON.stringify(a)});case 17:"OK"==e.sent&&(S(),B(),A.push("/your"));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:e.root,children:[Object(V.jsx)(C.a,{color:"primary","aria-label":"new poll",component:"span",onClick:function(){if(!O)return y("Sign in to create poll"),void v(!0);i(!0)},className:e.button,children:Object(V.jsx)(Ne.a,{})}),Object(V.jsxs)(D.a,{open:o,onClose:B,"aria-labelledby":"form-dialog-title",children:[Object(V.jsx)(Ce.a,{id:"form-dialog-title",children:"Create New Poll"}),Object(V.jsxs)(we.a,{children:[Object(V.jsx)(G.a,{autoFocus:!0,error:""!=h.err,helperText:h.err,margin:"dense",id:"name",label:"Question",value:h.val,onChange:function(e){return p({val:e.target.value.slice(0,Math.min(e.target.value.length,50)),err:""})},fullWidth:!0}),s.map((function(t,n){var a=t.val,o=t.err;return Object(V.jsxs)(f.a,{className:e.optionContainer,children:[Object(V.jsx)(G.a,{error:""!=o,helperText:o,margin:"dense",id:"name",label:"Option "+(n+1),value:a,onChange:function(e){return function(e,t){if(e.preventDefault(),!(e.target.value.length>20)){var n=Object(M.a)(s);n[t]={val:e.target.value,err:""},l(n),console.log(e.target.value,t)}}(e,n)},fullWidth:!0}),Object(V.jsx)(C.a,{"aria-label":"delete",onClick:function(e){return function(e,t){e.preventDefault();var n=Object(M.a)(s);n.splice(t,1),l(n)}(e,n)},disabled:n in[0,1],children:Object(V.jsx)(De.a,{})})]},n)})),Object(V.jsx)(w.a,{className:e.addOptionButton,variant:"outlined",color:"primary",startIcon:Object(V.jsx)(Ge.a,{}),onClick:function(){s.length<10&&l([].concat(Object(M.a)(s),[{val:"",err:""}]))},disabled:s.length>=10,children:"Add Option"})]}),Object(V.jsxs)(ke.a,{children:[Object(V.jsx)(w.a,{onClick:B,color:"secondary",variant:"outlined",className:e.formButton,children:"Cancel"}),Object(V.jsx)(w.a,{onClick:z,color:"primary",variant:"contained",className:e.formButton,children:"Create"})]})]})]})}n(146),n(1886),n(1896),Object(h.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));var Ve=n(1890),Le=n(1892),Ie=n(1891),Ue=n(178),Te=n.n(Ue),He=n(1898),_e=n(119),Xe=n(180),We=n.n(Xe),Ze=n(181),Qe=n.n(Ze),Me=n(179),qe=n.n(Me),Fe=n(115),Ke=n.n(Fe),Ee=n(177),Ye=n.n(Ee),Je=n(53),$e=Object(h.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,color:"black"},toolbar:{backgroundColor:"#fafafa"},passiveLink:{display:"flex",alignItems:"center",color:"rgba(0, 0, 0, 0.54)",textDecoration:"none","&:hover":{textDecoration:"underline"}},activeLink:{display:"flex",color:"rgba(34, 191, 160, 1)",textDecoration:"underline"},loginButton:{marginLeft:e.spacing(2)},breadcrumbs:{marginLeft:"auto"},logo:{height:"35px",width:"auto",maxWidth:"50vw",margin:e.spacing(1)},icon:{marginRight:e.spacing(.5),width:20,height:20}}}));function et(e){e.isOpen,e.setIsOpen;var t=$e(),n=o.a.useState(!0),a=Object(j.a)(n,2),i=(a[0],a[1],o.a.useState(null)),r=Object(j.a)(i,2),c=r[0],s=(r[1],Boolean(c),Object(X.b)());s.loginWithRedirect,s.logout,s.isAuthenticated,s.user;return Object(V.jsx)("div",{className:t.root,children:Object(V.jsx)(Ve.a,{position:"fixed",children:Object(V.jsxs)(Ie.a,{className:t.toolbar,children:[Object(V.jsx)(nt,{}),Object(V.jsx)("img",{className:t.logo,alt:"GIF Vote",src:"data:image/png;base64,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"}),Object(V.jsx)(tt,{})]})})})}var tt=function(){var e=$e(),t=Object(X.b)().isAuthenticated;return Object(V.jsxs)(He.a,{"aria-label":"breadcrumb",className:e.breadcrumbs,children:[Object(V.jsxs)(Je.b,{className:e.passiveLink,activeClassName:e.activeLink,exact:!0,to:"/",children:[Object(V.jsx)(T.a,{className:e.icon}),"Most Votes"]}),Object(V.jsxs)(Je.b,{className:e.passiveLink,activeClassName:e.activeLink,to:"/most-like",children:[Object(V.jsx)(J.a,{className:e.icon}),"Most Likes"]}),Object(V.jsxs)(Je.b,{className:e.passiveLink,activeClassName:e.activeLink,to:"/latest",children:[Object(V.jsx)(Ke.a,{className:e.icon}),"Latest"]}),t&&Object(V.jsxs)(Je.b,{className:e.passiveLink,activeClassName:e.activeLink,to:"/your",children:[Object(V.jsx)(Ye.a,{className:e.icon}),"Your Polls"]})]})},nt=function(){var e=$e(),t=Object(a.useState)(!1),n=Object(j.a)(t,2),o=n[0],i=n[1],r=Object(X.b)(),c=r.isAuthenticated,s=r.user,l=r.loginWithRedirect,u=r.logout;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(C.a,{edge:"start",className:e.menuButton,color:"textPrimary","aria-label":"menu",onClick:function(){return i(!o)},children:Object(V.jsx)(Te.a,{})}),Object(V.jsx)(Le.a,{anchor:"left",open:o,onClose:function(){i(!1)},children:Object(V.jsxs)(A.a,{children:[Object(V.jsxs)(O.a,{children:[Object(V.jsxs)(x.a,{children:[c&&Object(V.jsx)(v.a,{src:s.picture,alt:s.name}),!c&&Object(V.jsx)(v.a,{alt:"Guest",children:Object(V.jsx)(ue.a,{})})]}),Object(V.jsx)(y.a,{primary:s?s.name:"Guest",secondary:s?s.email:"Sign in to see your profile"}),c&&Object(V.jsx)(C.a,{className:e.loginButton,onClick:u,children:Object(V.jsx)(_e.b,{})}),!c&&Object(V.jsx)(C.a,{className:e.loginButton,onClick:l,children:Object(V.jsx)(_e.a,{})})]}),Object(V.jsx)(k.a,{}),Object(V.jsxs)(O.a,{button:!0,children:[Object(V.jsx)(P.a,{children:Object(V.jsx)(qe.a,{})}),Object(V.jsx)(y.a,{primary:"Give Feedback",secondary:"Help us improve GIF Votes"})]}),Object(V.jsx)(k.a,{}),Object(V.jsxs)(O.a,{button:!0,children:[Object(V.jsx)(P.a,{children:Object(V.jsx)(We.a,{})}),Object(V.jsx)(y.a,{primary:"Settings"})]}),Object(V.jsxs)(O.a,{button:!0,children:[Object(V.jsx)(P.a,{children:Object(V.jsx)(Qe.a,{})}),Object(V.jsx)(y.a,{primary:"About"})]})]})})]})},at=n(77),ot=n(182),it=n.n(ot),rt=Object(h.a)((function(e){return{root:{},title:{display:"flex",flexDirection:"row"},titleText:{alignSelf:"center",marginRight:e.spacing(2)},closeButton:{marginLeft:"auto",color:e.palette.grey[500]},video:{marginLeft:"auto",marginRight:"auto"},videoContainer:{display:"flex",flexDirection:"column",justifyContent:"center"}}}));var ct=function(e){var t=rt(),n=Z(),o=n.signInOpen,i=n.setSignInOpen,r=n.signInMsg,c=(n.setSignInMsg,Object(X.b)()),s=c.loginWithRedirect,l=(c.loginWithPopup,c.isAuthenticated);return Object(a.useEffect)((function(){l&&o&&i(!1)}),[l]),Object(V.jsx)("div",{children:Object(V.jsxs)(D.a,{open:o,onClose:function(){i(!1)},className:t.root,children:[Object(V.jsxs)(Ce.a,{disableTypography:!0,className:t.title,children:[Object(V.jsx)(at.a,{variant:"h4",className:t.titleText,children:r}),Object(V.jsx)(C.a,{"aria-label":"close",className:t.closeButton,onClick:function(){i(!1)},children:Object(V.jsx)(it.a,{})})]}),Object(V.jsxs)(we.a,{dividers:!0,className:t.videoContainer,children:[Object(V.jsx)(at.a,{gutterBottom:!0,children:"Here's a GIF to start your day!"}),Object(V.jsx)("video",{width:"60%",height:"auto",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:t.video,children:Object(V.jsx)("source",{src:function(){var e=["https://media0.giphy.com/media/xT9DPnxOqFNu0vObyU/giphy-downsized-small.mp4?cid=ecf05e477ybh0yl5kdyzkwyz5g7ljply8vk3ixadsfv9ywjz&rid=giphy-downsized-small.mp4&ct=g","https://media0.giphy.com/media/l2Sq3jYHktALKdQJO/giphy-downsized-small.mp4?cid=ecf05e477ybh0yl5kdyzkwyz5g7ljply8vk3ixadsfv9ywjz&rid=giphy-downsized-small.mp4&ct=g","https://media1.giphy.com/media/ur5T6Wuw4xK2afXVmd/giphy-downsized-small.mp4?cid=ecf05e477ybh0yl5kdyzkwyz5g7ljply8vk3ixadsfv9ywjz&rid=giphy-downsized-small.mp4&ct=g","https://media2.giphy.com/media/26xBSxisb1xYv1dja/giphy-downsized-small.mp4?cid=ecf05e477ybh0yl5kdyzkwyz5g7ljply8vk3ixadsfv9ywjz&rid=giphy-downsized-small.mp4&ct=g","https://media0.giphy.com/media/rVaFLAGrPcmlQR1nmt/giphy-downsized-small.mp4?cid=ecf05e477ybh0yl5kdyzkwyz5g7ljply8vk3ixadsfv9ywjz&rid=giphy-downsized-small.mp4&ct=g","https://media1.giphy.com/media/xT9DPPqwOCoxi3ASWc/giphy-downsized-small.mp4?cid=ecf05e477ybh0yl5kdyzkwyz5g7ljply8vk3ixadsfv9ywjz&rid=giphy-downsized-small.mp4&ct=g","https://media0.giphy.com/media/xT9DPGsywQ5zMfR6KY/giphy-downsized-small.mp4?cid=ecf05e477ybh0yl5kdyzkwyz5g7ljply8vk3ixadsfv9ywjz&rid=giphy-downsized-small.mp4&ct=g","https://media4.giphy.com/media/26n6yBeeXFU8C5j8c/giphy-downsized-small.mp4?cid=ecf05e471vfffwv91zo73j3x8h4q83yeezw44y1j75uf3foo&rid=giphy-downsized-small.mp4&ct=g","https://media4.giphy.com/media/l1BgRkTSJlYgCVqHm/giphy-downsized-small.mp4?cid=ecf05e47lhwhdp46xml09m3af3257q7u8dtvdxamfntftgnh&rid=giphy-downsized-small.mp4&ct=g"];return e[Math.floor(Math.random()*e.length)]}()})})]}),Object(V.jsx)(w.a,{variant:"contained",color:"primary",onClick:s,children:"Sign In"})]})})};n(333);var st=n(73),lt=n(41),ut=n(45),dt=n(116),jt=function(e){var t=e.index,n=e.style,a=e.data;if(t==a.length)return Object(V.jsx)("div",{style:{height:"50px"},children:"Loading..."});var o=a[t],i=o.gifURL,r=o.gifHeight,c=o.gifWidth,s=o.userId,l=o.poll_text,u=o.created_by,d=o.user_avatar,j=o.created_at,b=o.winner,m=o.chartData,h=o.voteData,p=o.poll_id,g=o.isVoted_bool,f=o.totalVoteCount,O=o.comment_count,x=o.num_likes,v=o.user_liked;return Object(V.jsx)("div",{style:Object(lt.a)(Object(lt.a)({},n),{display:"flex",justifyContent:"center"}),children:Object(V.jsx)(be,{gifURL:i,gifHeight:r,gifWidth:c,user_id:s,title:l,created_by:u,user_avatar:d,created_at:j,winner:b,chartData:m,data:h,poll_id:p,isVoted_bool:g,totalVoteCount:f,comment_count:O,num_likes:x,user_liked:v},t)})},bt=function(){var e=K(),t=e.data,n=(e.getUserData,e.getDataset,e.updateDataset,e.refreshDataset,e.handleFetchMoreData,e.handleFetchMoreDataPromise),o=(e.isPersonal,e.setIsPersonal,e.hasMore,e.userId,e.setSortBy,Object(a.useState)(!1)),i=Object(j.a)(o,2),r=(i[0],i[1],Object(a.useState)(!0)),c=Object(j.a)(r,2),s=c[0],l=(c[1],Object(dt.a)()),u=Object(j.a)(l,2),d=u[0],b=u[1],m=function(e){if(e>=t.length)return console.log(e),120;var n=.9*Math.min(600,Math.max(300,.5*d)),a=t[e].gifHeight*n/t[e].gifWidth;return d>=960&&(a+=100),console.log(e,a,n,d),a+350},h=s?t.length+1:t.length;return Object(V.jsx)(st.a,{isItemLoaded:function(e){return e<t.length&&null!==t[e]&&0!=e},itemCount:h,loadMoreItems:function(e,t){return console.log("loading more data",e,t),new Promise((function(e){n().then((function(){console.log("loaded more data"),e("OK")}))}))},children:function(e){var n=e.onItemsRendered,a=e.ref;return Object(V.jsx)(ut.b,{height:b,width:d,itemCount:h,onItemsRendered:n,ref:a,itemSize:m,itemData:t,children:jt})}})},mt=Object(h.a)((function(e){return{root:{marginTop:e.spacing(8)},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},gridContainer:{display:"flex",justifyContent:"center",padding:e.spacing(2)},itemContainer:{display:"flex",justifyContent:"center",padding:e.spacing(2)},newPollDialog:{position:"fixed",bottom:"5vmin",right:"5vmin"},infiniteList:{display:"flex",justifyContent:"center"}}}));var ht=function(e){var t=e.personal,n=e.sortBy,o=mt(),i=Object(a.useState)(0),r=Object(j.a)(i,2),c=(r[0],r[1],K()),s=(c.data,c.getUserData,c.getDataset,c.updateDataset,c.refreshDataset),l=(c.handleFetchMoreData,c.isPersonal,c.setIsPersonal),u=(c.hasMore,c.userId),d=c.setSortBy;return Object(a.useEffect)((function(){l(t),d(n)}),[t,n]),Object(a.useEffect)((function(){s()}),[u]),Object(V.jsxs)("div",{className:o.root,children:[Object(V.jsx)("div",{className:o.infiniteList,children:Object(V.jsx)(bt,{})}),Object(V.jsx)("div",{className:o.newPollDialog,children:Object(V.jsx)(Re,{})})]})},pt=Object(h.a)((function(e){return{root:{}}}));var gt=function(){pt();var e=Object(a.useState)(0),t=Object(j.a)(e,2),n=(t[0],t[1],Object(a.useState)(!0)),o=Object(j.a)(n,2),i=o[0],r=o[1],c=Object(X.b)(),s=c.isAuthenticated,l=c.user,h=(c.logout,c.isLoading,K()),p=(h.data,h.getUserData),g=(h.getDataset,h.updateDataset,h.refreshDataset,h.handleFetchMoreData,h.isPersonal,h.setIsPersonal,h.hasMore,h.userId,h.setSortBy,Object(a.useState)(!1)),f=Object(j.a)(g,2),O=f[0],x=f[1];return Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return console.log("authenticated!",l),x(!0),e.next=5,p(l);case 5:t=e.sent,console.log("user data",t);case 7:case"end":return e.stop()}}),e)}))),[s]),Object(V.jsx)(Je.a,{children:Object(V.jsxs)("div",{className:"App",children:[Object(V.jsx)(et,{isOpen:i,setIsOpen:r}),Object(V.jsx)(b.a,{open:O,autoHideDuration:6e3,onClose:function(){return x(!1)},message:"Signed In!",TransitionComponent:m.a}),Object(V.jsx)(ct,{}),Object(V.jsxs)(Be.c,{children:[Object(V.jsx)(Be.a,{path:"/your",children:Object(V.jsx)(ht,{personal:1,sortBy:"time"})}),Object(V.jsx)(Be.a,{path:"/most-like",children:Object(V.jsx)(ht,{personal:0,sortBy:"like"})}),Object(V.jsx)(Be.a,{path:"/latest",children:Object(V.jsx)(ht,{personal:0,sortBy:"time"})}),Object(V.jsx)(Be.a,{path:"/",children:Object(V.jsx)(ht,{personal:0,sortBy:"vote"})})]})]})})},ft=(n(183),n(1893),Object(h.a)({container:{position:"relative"}}),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1903)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),i(e),r(e)}))});R.b.font.family=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),R.b.font.size=10,console.log("default",R.b);var Ot="dev-clx9x5qx.us.auth0.com",xt="h579hxVGmzOijJ5UxLSEDzMlfEaGfjQD";console.log("domain",Ot,xt);var vt=Object(i.a)({palette:{primary:{main:"#22bfa0"}}});s.a.render(Object(V.jsx)(X.a,{domain:Ot,clientId:xt,redirectUri:window.location.origin,children:Object(V.jsx)(Q,{children:Object(V.jsx)(E,{children:Object(V.jsx)(r.a,{theme:vt,children:Object(V.jsx)(gt,{})})})})}),document.getElementById("root")),ft()},210:function(e,t,n){},212:function(e,t,n){},333:function(e,t,n){}},[[1822,1,2]]]);
//# sourceMappingURL=main.8443c180.chunk.js.map